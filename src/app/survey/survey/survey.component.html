
<mat-toolbar color="primary"
    fxLayout="row wrap"
    fxLayout.xs="column"
    fxLayoutAlign="center center"
    style="height: 100px; color: white; font-size: 2em;"
>
    <span>{{ title | translate }}</span>
</mat-toolbar>

<toco-progress [loading]="hasTaskInProgress"></toco-progress>

<form [formGroup]="evaluationFormGroup">

    <mat-horizontal-stepper [linear]="'true'" #stepper>
        <mat-step [stepControl]="evalJournalDataFormGroup">
            <ng-template matStepLabel>{{ 'DATOS_REVISTA' | translate }}</ng-template>
            <div
                fxLayout="row wrap"
                fxLayout.xs="column"
                fxLayoutAlign="space-between center"
                [formGroupName]="evaluation_ChildControlsPath.journalData"
            >
                <!-- Start Name -->
                <mat-form-field class="w-100" [appearance]="'outline'">
                    <mat-label>{{ 'NOMBRE' | translate }}</mat-label>
                    <input matInput [formControlName]="evaluation_ChildControlsPath.name" [required]="'true'" [placeholder]="'ESCR_NOMBRE_REVISTA' | translate" />
                    <mat-error *ngIf="getErrorState(evaluation_ChildControlsPath.name)">{{ getErrorMessage(evaluation_ChildControlsPath.name) | translate }}</mat-error>
                </mat-form-field>
                <!-- End Name -->

                <!-- Start URL -->
                <mat-form-field class="w-45" [appearance]="'outline'">
                    <mat-label>Url</mat-label>
                    <input matInput [formControlName]="evaluation_ChildControlsPath.url" [required]="'true'" [placeholder]="'URL_GENERICA' | translate" />
                    <mat-error *ngIf="getErrorState(evaluation_ChildControlsPath.url)">{{ getErrorMessage(evaluation_ChildControlsPath.url) | translate }}</mat-error>
                </mat-form-field>
                <!-- End Name -->

                <!-- Start ISSN -->
                <input-issn [content]="issnContent"></input-issn>
                <!-- End ISSN -->
            </div>
            <div
                fxLayout="row wrap"
                fxLayout.xs="row"
                fxLayoutAlign="end center"
            >
                <button mat-raised-button style="color: white;" color="primary" type="button"
                    [matTooltip]="'IR_A_ENCUESTA' | translate"
                    [disabled]="evalJournalDataFormGroup.invalid" (click)="goToSurvey()"
                >
                    {{ 'SIGUIENTE' | translate }}
                    <mat-icon>navigate_next</mat-icon>
                </button>
            </div>
        </mat-step>

        <mat-step [stepControl]="evalSurveyFormGroup">
            <ng-template matStepLabel>{{ 'ENCUESTA' | translate }}</ng-template>
            <router-outlet></router-outlet>
            <div
                fxLayout="row wrap"
                fxLayout.xs="row"
                fxLayoutAlign="end center"
                style="margin-top: 1.5em;"
            >
                <button mat-raised-button style="color: white;" color="primary" type="button"
                    [matTooltip]="'IR_A_DATOS_REVISTA' | translate"
                    [disabled]="evalSurveyFormGroup.invalid" (click)="goToJournalData()"
                >
                    {{ 'ANTERIOR' | translate }}
                    <mat-icon>navigate_before</mat-icon>
                </button>
                <button mat-raised-button style="color: white; margin-left: 1.5em;" color="primary" type="button"
                    [matTooltip]="'IR_A_RESULTADO_Y_RECOMENDACIONES' | translate"
                    [disabled]="evalSurveyFormGroup.invalid" (click)="goToResultAndRecommendations()"
                >
                    {{ 'SIGUIENTE' | translate }}
                    <mat-icon>navigate_next</mat-icon>
                </button>
            </div>
        </mat-step>

        <mat-step>
            <ng-template matStepLabel>{{ 'RESULTADO_Y_RECOMENDACIONES' | translate }}</ng-template>
            <app-survey-result></app-survey-result>
            You are now done.

            <div
                fxLayout="row wrap"
                fxLayout.xs="row"
                fxLayoutAlign="end center"
            >
                <button mat-raised-button style="color: white;" color="primary" type="button"
                    [matTooltip]="'IR_A_ENCUESTA' | translate"
                    (click)="goToSurveyBack()"
                >
                    {{ 'ANTERIOR' | translate }}
                    <mat-icon>navigate_before</mat-icon>
                </button>
                <button mat-raised-button [matMenuTriggerFor]="menuSave" style="color: white; margin-left: 1.5em;" color="primary" type="button"
                    [matTooltip]="'GUARDAR_TOOLTIP' | translate"
                >
                    {{ 'GUARDAR' | translate }}
                    <mat-icon>more_vert</mat-icon>
                </button>
                <mat-menu #menuSave="matMenu">
                    <button mat-menu-item (click)="save()">
                        <mat-icon>create</mat-icon>
                        <span>{{ 'GUARDAR_Y_HACER_UNA_NUEVA' | translate }}</span>
                    </button>
                    <button mat-menu-item (click)="save()">
                        <mat-icon>compare</mat-icon>
                        <span>{{ 'GUARDAR_Y_COMPARAR' | translate }}</span>
                    </button>
                    <button mat-menu-item (click)="save()">
                        <mat-icon>share</mat-icon>
                        <span>{{ 'GUARDAR_Y_COMPARTIR' | translate }}</span>
                    </button>
                    <button mat-menu-item (click)="save()">
                        <mat-icon>exit_to_app</mat-icon>
                        <span>{{ 'GUARDAR_Y_SALIR' | translate }}</span>
                    </button>
                </mat-menu>
            </div>
        </mat-step>
    </mat-horizontal-stepper>

    <!-- <br />
    <mat-tab-group mat-align-tabs="center" [animationDuration]="'1500ms'" (selectedIndexChange)="onSelectTab($event)">
        <mat-tab [label]="'ENCUESTA' | translate"> 
            <router-outlet></router-outlet>
        </mat-tab>

        <mat-tab [label]="'RESULTADO' | translate">
            <app-survey-result></app-survey-result>
        </mat-tab>

        <mat-tab [label]="'RECOMENDACION' | translate">
            <app-survey-recommendation></app-survey-recommendation>
        </mat-tab>
    </mat-tab-group> -->

</form>
